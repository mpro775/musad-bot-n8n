# Security Utilities

هذا المجلد يحتوي على أدوات الأمان المساعدة لحماية البيانات الحساسة وتعزيز الأمان العام للتطبيق.

## الملفات الموجودة

### `pii-redactor.ts`

**وظيفة**: تنقية البيانات الشخصية (PII) قبل الإرسال إلى أنظمة المراقبة

#### الميزات:

- **كشف البريد الإلكتروني**: استبدال عناوين البريد بـ `[REDACTED:EMAIL]`
- **كشف أرقام الهواتف**: استبدال الأرقام بـ `[REDACTED:PHONE]`
- **حذف الحقول الحساسة**: إزالة كلمات المرور، الرموز المميزة، إلخ
- **معالجة عميقة**: تنقية البيانات المتداخلة والمصفوفات

#### الاستخدام:

```typescript
import { redactEvent } from './pii-redactor';

// في Sentry beforeSend
beforeSend: (event) => {
  return redactEvent(event);
};
```

#### أمثلة على البيانات المنقاة:

```json
// قبل التنقية
{
  "user": {
    "email": "user@example.com",
    "phone": "+1234567890",
    "password": "secret123"
  },
  "request": {
    "headers": {
      "authorization": "Bearer token123"
    }
  }
}

// بعد التنقية
{
  "user": {
    "email": "[REDACTED:EMAIL]",
    "phone": "[REDACTED:PHONE]",
    "password": "[REDACTED]"
  },
  "request": {
    "headers": {
      "authorization": "[REDACTED]"
    }
  }
}
```

## أفضل الممارسات

### 1. الاستخدام الآمن للبيانات

- استخدم PII Redactor دائماً قبل إرسال البيانات إلى أنظمة خارجية
- لا تقم بتسجيل البيانات الحساسة في logs
- استخدم encryption للبيانات المخزنة

### 2. تطوير آمن

- تجنب تسجيل كلمات المرور في logs
- استخدم environment variables للمعلومات الحساسة
- قم بفحص الكود بحثاً عن تسرب البيانات

### 3. المراقبة والتنبيه

- راقب أخطاء التطبيق بانتظام
- قم بإعداد تنبيهات للأنشطة المشبوهة
- راجع logs بانتظام للكشف عن محاولات الاختراق

## الاعتمادات

- **Regular Expressions**: لكشف أنماط البيانات الحساسة
- **Recursive Processing**: لمعالجة البيانات المتداخلة
- **Error Handling**: لضمان عدم فشل التطبيق عند حدوث خطأ في التنقية
